@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Aurora Theme - Light Mode */
    /* Deep cosmic background with aurora-inspired accents */
    --background: 220 25% 97%;
    --foreground: 230 25% 18%;

    /* Cards with subtle aurora tint */
    --card: 210 30% 98%;
    --card-foreground: 230 25% 18%;

    --popover: 0 0% 100%;
    --popover-foreground: 230 25% 18%;

    /* Primary - Aurora Teal/Cyan */
    --primary: 174 72% 40%;
    --primary-foreground: 0 0% 100%;
    --primary-glow: 174 80% 55%;

    /* Secondary - Aurora Purple */
    --secondary: 270 50% 94%;
    --secondary-foreground: 270 60% 35%;

    /* Muted - Soft aurora grey */
    --muted: 220 20% 94%;
    --muted-foreground: 220 15% 45%;

    /* Accent - Aurora Green */
    --accent: 160 70% 42%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 20% 88%;
    --input: 220 20% 92%;
    --ring: 174 72% 40%;

    --radius: 0.75rem;

    /* Semantic Status Colors - Use these instead of hardcoded colors */
    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    --info: 210 90% 50%;
    --info-foreground: 0 0% 100%;
    
    /* Status indicators */
    --online: 142 71% 45%;
    --online-foreground: 0 0% 100%;
    --offline: 220 15% 60%;
    --offline-foreground: 0 0% 100%;
    --busy: 38 92% 50%;
    --busy-foreground: 0 0% 100%;
    --away: 38 92% 50%;
    --away-foreground: 0 0% 100%;
    
    /* Gender colors */
    --male: 210 90% 50%;
    --female: 330 81% 60%;

    /* Theme gradients - uses primary color only */
    --gradient-primary: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.85));
    --gradient-hero: linear-gradient(180deg, hsl(var(--background)) 0%, hsl(var(--secondary)) 100%);
    --gradient-aurora: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.8));
    --shadow-soft: 0 4px 20px -4px hsl(var(--foreground) / 0.08);
    --shadow-card: 0 8px 32px -8px hsl(var(--foreground) / 0.1);
    --shadow-glow: 0 0 40px hsl(var(--primary) / 0.25);

    /* Sidebar - Aurora dark theme */
    --sidebar-background: 230 35% 15%;
    --sidebar-foreground: 200 50% 95%;
    --sidebar-primary: 174 72% 50%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 270 40% 25%;
    --sidebar-accent-foreground: 200 50% 95%;
    --sidebar-border: 230 30% 25%;
    --sidebar-ring: 174 72% 50%;
  }

  .dark {
    /* Aurora Theme - Dark Mode */
    /* Deep cosmic night sky background */
    --background: 230 35% 8%;
    --foreground: 200 50% 95%;

    /* Cards with aurora glow */
    --card: 230 30% 12%;
    --card-foreground: 200 50% 95%;

    --popover: 230 35% 10%;
    --popover-foreground: 200 50% 95%;

    /* Primary - Aurora Teal/Cyan (glowing) */
    --primary: 174 72% 50%;
    --primary-foreground: 230 35% 8%;
    --primary-glow: 174 80% 60%;

    /* Secondary - Aurora Purple */
    --secondary: 270 45% 20%;
    --secondary-foreground: 270 60% 80%;

    /* Muted - Deep cosmic grey */
    --muted: 230 25% 18%;
    --muted-foreground: 220 20% 65%;

    /* Accent - Aurora Green */
    --accent: 160 70% 45%;
    --accent-foreground: 230 35% 8%;

    --destructive: 0 65% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 230 25% 20%;
    --input: 230 25% 18%;
    --ring: 174 72% 50%;

    /* Semantic Status Colors - Dark mode */
    --success: 142 71% 50%;
    --success-foreground: 230 35% 8%;
    --warning: 38 92% 55%;
    --warning-foreground: 230 35% 8%;
    --info: 210 90% 55%;
    --info-foreground: 230 35% 8%;
    
    /* Status indicators */
    --online: 142 71% 50%;
    --online-foreground: 230 35% 8%;
    --offline: 220 20% 50%;
    --offline-foreground: 0 0% 100%;
    --busy: 38 92% 55%;
    --busy-foreground: 230 35% 8%;
    --away: 38 92% 55%;
    --away-foreground: 230 35% 8%;
    
    /* Gender colors */
    --male: 210 90% 55%;
    --female: 330 81% 65%;

    /* Theme gradients - dark mode - uses primary color only */
    --gradient-primary: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.85));
    --gradient-hero: linear-gradient(180deg, hsl(var(--background)) 0%, hsl(var(--secondary)) 100%);
    --gradient-aurora: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.8));
    --shadow-soft: 0 4px 20px -4px hsl(0 0% 0% / 0.4);
    --shadow-card: 0 8px 32px -8px hsl(0 0% 0% / 0.5);
    --shadow-glow: 0 0 40px hsl(var(--primary) / 0.35);

    /* Sidebar - Deep aurora */
    --sidebar-background: 230 40% 10%;
    --sidebar-foreground: 200 50% 95%;
    --sidebar-primary: 174 72% 50%;
    --sidebar-primary-foreground: 230 35% 8%;
    --sidebar-accent: 270 40% 22%;
    --sidebar-accent-foreground: 200 50% 95%;
    --sidebar-border: 230 30% 18%;
    --sidebar-ring: 174 72% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    /* Safe area support for notched devices */
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    /* Prevent rubber-banding on iOS */
    height: 100%;
    overflow: hidden;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Inter', system-ui, sans-serif;
    /* Prevent pull-to-refresh and overscroll */
    overscroll-behavior: none;
    /* Prevent text selection on mobile */
    -webkit-user-select: none;
    user-select: none;
    /* Smooth scrolling */
    -webkit-overflow-scrolling: touch;
    /* Full height for native apps */
    height: 100%;
    overflow: auto;
    /* Prevent iOS zoom on input focus */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  #root {
    height: 100%;
    overflow: auto;
  }

  /* Allow text selection in inputs and textareas */
  input, textarea {
    -webkit-user-select: text;
    user-select: text;
    /* Prevent zoom on iOS when focusing inputs */
    font-size: 16px !important;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Quicksand', system-ui, sans-serif;
  }

  /* Hide scrollbars on mobile for cleaner look */
  ::-webkit-scrollbar {
    display: none;
  }

  /* Disable tap highlight on mobile */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* iOS-specific styles */
  .ios-notch {
    /* Extra padding for notch area */
  }

  /* Android-specific styles */
  .android-layout {
    /* Android-specific adjustments */
  }

  /* Touch-friendly styles */
  .touch-manipulation {
    touch-action: manipulation;
  }

  /* Native app container */
  .native-container {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    min-height: 100dvh;
  }
}

/* ========================================
   RESPONSIVE DEVICE UTILITIES
   ======================================== */

@layer utilities {
  /* Font utilities */
  .font-display {
    font-family: 'Quicksand', system-ui, sans-serif;
  }

  /* Gradient utilities */
  .gradient-primary {
    background: var(--gradient-primary);
  }

  .gradient-hero {
    background: var(--gradient-hero);
  }

  .gradient-aurora {
    background: var(--gradient-aurora);
  }

  /* Shadow utilities */
  .shadow-soft {
    box-shadow: var(--shadow-soft);
  }

  .shadow-card {
    box-shadow: var(--shadow-card);
  }

  .shadow-glow {
    box-shadow: var(--shadow-glow);
  }

  /* Aurora glow effect */
  .aurora-glow {
    box-shadow: 0 0 16px hsl(var(--primary) / 0.35);
    will-change: opacity;
  }

  /* ========================================
     DEVICE-SPECIFIC UTILITIES
     ======================================== */
  
  /* Touch-friendly button sizes */
  .btn-touch {
    @apply min-h-[44px] min-w-[44px] px-4 py-3;
  }

  /* Safe area padding */
  .safe-area-inset {
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
  }

  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Responsive container */
  .container-responsive {
    @apply w-full mx-auto px-4;
    max-width: min(100% - 2rem, 1400px);
  }

  /* Responsive text */
  .text-responsive {
    font-size: clamp(1rem, 2.5vw + 0.5rem, 1.25rem);
    line-height: 1.6;
  }

  .heading-responsive {
    font-size: clamp(1.5rem, 5vw + 0.5rem, 3rem);
    line-height: 1.2;
  }

  /* Responsive grid */
  .grid-responsive {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr));
    gap: 1rem;
  }

  /* Responsive flex */
  .flex-responsive {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  /* Hide on specific devices */
  .hide-mobile {
    @apply hidden md:block;
  }

  .hide-desktop {
    @apply block md:hidden;
  }

  .hide-tablet {
    @apply block md:hidden lg:block;
  }

  /* Show on specific devices */
  .show-mobile-only {
    @apply block sm:hidden;
  }

  .show-tablet-only {
    @apply hidden md:block lg:hidden;
  }

  .show-desktop-only {
    @apply hidden lg:block;
  }

  /* Responsive spacing */
  .space-responsive {
    @apply space-y-4 md:space-y-6 lg:space-y-8;
  }

  .gap-responsive {
    @apply gap-3 sm:gap-4 md:gap-6 lg:gap-8;
  }

  .p-responsive {
    @apply p-3 sm:p-4 md:p-6 lg:p-8;
  }

  .px-responsive {
    @apply px-4 sm:px-6 md:px-8 lg:px-12;
  }

  .py-responsive {
    @apply py-4 sm:py-6 md:py-8 lg:py-12;
  }

  /* Touch device optimizations */
  @media (hover: none) and (pointer: coarse) {
    .touch-larger {
      @apply text-lg p-4;
    }
    
    .touch-scroll {
      -webkit-overflow-scrolling: touch;
      overflow-y: auto;
    }
  }

  /* Mouse/desktop optimizations */
  @media (hover: hover) and (pointer: fine) {
    .hover-effects {
      @apply transition-all duration-200 hover:scale-[1.02];
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .motion-safe-animate {
      animation: none !important;
      transition: none !important;
    }
  }

  /* High contrast mode */
  @media (prefers-contrast: high) {
    .contrast-adaptive {
      @apply border-2 border-foreground;
    }
  }

  /* Print styles */
  @media print {
    .no-print {
      display: none !important;
    }
    
    .print-only {
      display: block !important;
    }
  }

  /* Animations */
  .animate-slide-up {
    animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-slide-in-right {
    animation: slideInRight 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .animate-fade-in {
    animation: fadeIn 0.6s ease-out;
  }

  .animate-bounce-subtle {
    animation: bounceSubtle 2s ease-in-out infinite;
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-shake {
    animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97);
  }

  .animate-pulse-soft {
    animation: pulseSoft 2s ease-in-out infinite;
  }

  .animate-aurora {
    animation: auroraShift 8s ease-in-out infinite;
  }

  /* Aurora background blob animations */
  .animate-aurora-1 {
    animation: aurora-1 15s ease-in-out infinite;
  }

  .animate-aurora-2 {
    animation: aurora-2 18s ease-in-out infinite;
  }

  .animate-aurora-3 {
    animation: aurora-3 20s ease-in-out infinite;
  }

  .animate-aurora-4 {
    animation: aurora-4 16s ease-in-out infinite;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes bounceSubtle {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-10px) rotate(2deg);
  }
}

@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-4px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(4px);
  }
}

@keyframes pulseSoft {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Aurora background animations */
@keyframes aurora-1 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.2;
  }
  25% {
    transform: translate(50px, -30px) scale(1.1);
    opacity: 0.25;
  }
  50% {
    transform: translate(20px, 40px) scale(0.95);
    opacity: 0.18;
  }
  75% {
    transform: translate(-30px, 20px) scale(1.05);
    opacity: 0.22;
  }
}

@keyframes aurora-2 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.25;
  }
  33% {
    transform: translate(-40px, 50px) scale(1.15);
    opacity: 0.3;
  }
  66% {
    transform: translate(30px, -20px) scale(0.9);
    opacity: 0.2;
  }
}

@keyframes aurora-3 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.15;
  }
  50% {
    transform: translate(-60px, -40px) scale(1.2);
    opacity: 0.2;
  }
}

@keyframes aurora-4 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.15;
  }
  40% {
    transform: translate(40px, 30px) scale(1.1);
    opacity: 0.2;
  }
  80% {
    transform: translate(-20px, -50px) scale(0.95);
    opacity: 0.12;
  }
}

@keyframes auroraShift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes confettiFall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

@keyframes bounceIn {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@layer utilities {
  .animate-confetti-fall {
    animation: confettiFall 3s ease-out forwards;
  }

  .animate-bounce-in {
    animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
}

/* ========================================
   ACCESSIBILITY UTILITIES
   ======================================== */

@layer utilities {
  /* Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Focus visible styles */
  .focus-visible-ring {
    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
  }

  /* Skip to main content link */
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:p-4 focus:bg-primary focus:text-primary-foreground focus:rounded-lg;
  }

  /* High contrast text */
  .high-contrast {
    @apply text-foreground font-medium;
  }

  /* Keyboard navigation highlight */
  .keyboard-focus:focus-visible {
    @apply ring-2 ring-primary ring-offset-2 outline-none;
  }
}

/* ========================================
   PERFORMANCE OPTIMIZATIONS
   ======================================== */

@layer utilities {
  /* GPU acceleration */
  .gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
  }

  /* Lazy loading placeholder */
  .lazy-placeholder {
    @apply bg-muted animate-pulse;
  }

  /* Optimized images */
  .img-optimized {
    @apply object-cover;
    image-rendering: -webkit-optimize-contrast;
  }

  /* Smooth transitions with reduced motion support */
  .transition-smooth {
    @apply transition-all duration-200 ease-out;
  }

  @media (prefers-reduced-motion: reduce) {
    .transition-smooth {
      transition: none;
    }
  }
}

/* ========================================
   SCROLLBAR CUSTOMIZATION
   ======================================== */

@layer utilities {
  /* Custom scrollbar - visible on desktop */
  @media (hover: hover) and (pointer: fine) {
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      @apply bg-muted rounded-full;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      @apply bg-muted-foreground/30 rounded-full;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      @apply bg-muted-foreground/50;
    }
  }

  /* Thin scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.3) hsl(var(--muted));
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* ========================================
   DARK/LIGHT MODE TRANSITIONS
   ======================================== */

@layer base {
  html {
    color-scheme: dark light;
  }

  html.dark {
    color-scheme: dark;
  }

  html:not(.dark) {
    color-scheme: light;
  }

  /* Smooth theme transition */
  html.theme-transitioning,
  html.theme-transitioning *,
  html.theme-transitioning *::before,
  html.theme-transitioning *::after {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease !important;
  }
}

/* ========================================
   NATIVE APP SPECIFIC STYLES
   ======================================== */

@layer utilities {
  /* iOS specific */
  .ios-bounce {
    -webkit-overflow-scrolling: touch;
  }

  .ios-no-bounce {
    overscroll-behavior: none;
  }

  /* Android specific */
  .android-ripple {
    position: relative;
    overflow: hidden;
  }

  /* Native status bar area */
  .status-bar-padding {
    padding-top: env(safe-area-inset-top, 20px);
  }

  /* Native navigation bar area */
  .nav-bar-padding {
    padding-bottom: env(safe-area-inset-bottom, 20px);
  }

  /* Full height accounting for safe areas */
  .full-height-safe {
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }

  /* Dynamic viewport height */
  .h-dvh {
    height: 100vh;
    height: 100dvh;
  }

  .min-h-dvh {
    min-height: 100vh;
    min-height: 100dvh;
  }

  .max-h-dvh {
    max-height: 100vh;
    max-height: 100dvh;
  }
}

/* ========================================
   CROSS-BROWSER COMPATIBILITY
   ======================================== */

@layer base {
  /* Normalize box-sizing across all browsers */
  *, *::before, *::after {
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
  }

  /* Firefox-specific focus styles */
  ::-moz-focus-inner {
    border: 0;
    padding: 0;
  }

  /* IE/Edge input placeholder styling */
  ::-ms-input-placeholder {
    color: hsl(var(--muted-foreground));
    opacity: 1;
  }

  /* Webkit input placeholder styling */
  ::-webkit-input-placeholder {
    color: hsl(var(--muted-foreground));
    opacity: 1;
  }

  /* Firefox placeholder styling */
  ::-moz-placeholder {
    color: hsl(var(--muted-foreground));
    opacity: 1;
  }

  /* Standard placeholder styling */
  ::placeholder {
    color: hsl(var(--muted-foreground));
    opacity: 1;
  }

  /* IE/Edge clear button */
  ::-ms-clear {
    display: none;
  }

  /* Webkit search cancel button */
  ::-webkit-search-cancel-button {
    -webkit-appearance: none;
    appearance: none;
  }

  /* Firefox number input spinners */
  input[type="number"] {
    -moz-appearance: textfield;
  }

  /* Webkit number input spinners */
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
  }

  /* Safari date input fixes */
  input[type="date"],
  input[type="time"],
  input[type="datetime-local"] {
    -webkit-appearance: none;
    appearance: none;
  }

  /* Legacy browser font smoothing */
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* IE/Edge flexbox fixes */
  .flex-fix {
    flex-shrink: 0;
  }

  /* Safari flexbox gap fallback */
  @supports not (gap: 1rem) {
    .flex-gap > * + * {
      margin-left: 1rem;
    }
    .flex-gap-y > * + * {
      margin-top: 1rem;
    }
  }

  /* Firefox button padding fix */
  button::-moz-focus-inner {
    padding: 0;
    border: 0;
  }

  /* Safari button appearance fix */
  button,
  [type="button"],
  [type="reset"],
  [type="submit"] {
    -webkit-appearance: button;
    appearance: button;
  }

  /* IE/Edge select arrow hiding */
  select::-ms-expand {
    display: none;
  }

  /* Webkit autofill styling */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  textarea:-webkit-autofill,
  textarea:-webkit-autofill:hover,
  textarea:-webkit-autofill:focus,
  select:-webkit-autofill,
  select:-webkit-autofill:hover,
  select:-webkit-autofill:focus {
    -webkit-text-fill-color: hsl(var(--foreground));
    -webkit-box-shadow: 0 0 0px 1000px hsl(var(--input)) inset;
    box-shadow: 0 0 0px 1000px hsl(var(--input)) inset;
    transition: background-color 5000s ease-in-out 0s;
  }
}

@layer utilities {
  /* Cross-browser flexbox utilities */
  .flex-compat {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
  }

  .flex-center-compat {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
  }

  /* Cross-browser grid utilities */
  .grid-compat {
    display: -ms-grid;
    display: grid;
  }

  /* Cross-browser transform utilities */
  .transform-compat {
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    -o-transform: translateZ(0);
    transform: translateZ(0);
  }

  /* Cross-browser transition utilities */
  .transition-compat {
    -webkit-transition: all 0.3s ease;
    -moz-transition: all 0.3s ease;
    -o-transition: all 0.3s ease;
    transition: all 0.3s ease;
  }

  /* Cross-browser animation utilities */
  .animate-compat {
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    -o-animation-fill-mode: both;
    animation-fill-mode: both;
  }

  /* Cross-browser opacity utilities */
  .opacity-compat {
    -webkit-opacity: 1;
    -moz-opacity: 1;
    opacity: 1;
    filter: alpha(opacity=100);
  }

  /* Cross-browser border-radius utilities */
  .rounded-compat {
    -webkit-border-radius: var(--radius);
    -moz-border-radius: var(--radius);
    border-radius: var(--radius);
  }

  /* Cross-browser box-shadow utilities */
  .shadow-compat {
    -webkit-box-shadow: var(--shadow-soft);
    -moz-box-shadow: var(--shadow-soft);
    box-shadow: var(--shadow-soft);
  }

  /* Cross-browser background utilities */
  .bg-cover-compat {
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
  }

  /* Cross-browser backdrop blur */
  .backdrop-blur-compat {
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
  }

  @supports not (backdrop-filter: blur(8px)) {
    .backdrop-blur-compat {
      background-color: hsl(var(--background) / 0.95);
    }
  }

  /* Cross-browser sticky positioning */
  .sticky-compat {
    position: -webkit-sticky;
    position: sticky;
  }

  /* Cross-browser appearance reset */
  .appearance-none-compat {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  /* Cross-browser user-select */
  .select-none-compat {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  .select-text-compat {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }

  /* Cross-browser pointer-events */
  .pointer-events-none-compat {
    pointer-events: none;
  }

  /* Cross-browser object-fit */
  .object-cover-compat {
    -o-object-fit: cover;
    object-fit: cover;
  }

  .object-contain-compat {
    -o-object-fit: contain;
    object-fit: contain;
  }

  /* Cross-browser text overflow */
  .truncate-compat {
    overflow: hidden;
    -o-text-overflow: ellipsis;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Cross-browser line clamp */
  .line-clamp-2-compat {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3-compat {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Cross-browser aspect ratio fallback */
  .aspect-video-compat {
    aspect-ratio: 16 / 9;
  }

  @supports not (aspect-ratio: 16 / 9) {
    .aspect-video-compat {
      position: relative;
      padding-bottom: 56.25%;
    }
    .aspect-video-compat > * {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }

  .aspect-square-compat {
    aspect-ratio: 1 / 1;
  }

  @supports not (aspect-ratio: 1 / 1) {
    .aspect-square-compat {
      position: relative;
      padding-bottom: 100%;
    }
    .aspect-square-compat > * {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }

  /* Cross-browser gap fallback for flexbox */
  .gap-compat {
    gap: 1rem;
  }

  @supports not (gap: 1rem) {
    .gap-compat {
      margin: -0.5rem;
    }
    .gap-compat > * {
      margin: 0.5rem;
    }
  }

  /* Cross-browser min/max content */
  .w-max-compat {
    width: -webkit-max-content;
    width: -moz-max-content;
    width: max-content;
  }

  .w-min-compat {
    width: -webkit-min-content;
    width: -moz-min-content;
    width: min-content;
  }

  /* Cross-browser fit-content */
  .w-fit-compat {
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
  }
}

/* ========================================
   BROWSER-SPECIFIC FIXES
   ======================================== */

/* Safari-specific fixes */
@supports (-webkit-touch-callout: none) {
  /* Fix 100vh issue on Safari iOS */
  .h-screen-safari {
    height: -webkit-fill-available;
  }
  
  /* Fix flexbox issues */
  .safari-flex-fix {
    flex-basis: auto;
  }
}

/* Firefox-specific fixes */
@-moz-document url-prefix() {
  /* Firefox scrollbar styling */
  * {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.3) transparent;
  }
  
  /* Firefox button fix */
  button {
    line-height: normal;
  }
}

/* IE11 and Edge Legacy fixes */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  /* IE11 flexbox fixes */
  .ie-flex-fix {
    flex: 1 0 auto;
  }
  
  /* IE11 grid fallback */
  .ie-grid-fallback {
    display: block;
  }
}

/* Edge Legacy fixes */
@supports (-ms-ime-align: auto) {
  .edge-fix {
    font-feature-settings: normal;
  }
}

/* Samsung Internet Browser fixes */
@supports (-webkit-overflow-scrolling: touch) {
  .samsung-fix {
    -webkit-overflow-scrolling: touch;
  }
}

/* ========================================
   LEGACY BROWSER FALLBACKS
   ======================================== */

/* CSS Custom Properties fallback for very old browsers */
@supports not (--custom: property) {
  :root {
    /* Fallback colors for browsers without CSS custom properties */
  }
  
  body {
    background-color: #f5f7fa;
    color: #1a1f2e;
  }
  
  .dark body {
    background-color: #0f1419;
    color: #e5f0f5;
  }
}

/* Grid fallback for older browsers */
@supports not (display: grid) {
  .grid-fallback {
    display: block;
  }
  
  .grid-fallback > * {
    display: inline-block;
    vertical-align: top;
  }
}

/* Flexbox fallback for very old browsers */
@supports not (display: flex) {
  .flex-fallback {
    display: block;
  }
  
  .flex-fallback::after {
    content: "";
    display: table;
    clear: both;
  }
  
  .flex-fallback > * {
    float: left;
  }
}

/* ========================================
   PROGRESSIVE ENHANCEMENT
   ======================================== */

/* Container queries (progressive enhancement) */
@supports (container-type: inline-size) {
  .container-query {
    container-type: inline-size;
  }
  
  @container (min-width: 400px) {
    .container-sm\:flex-row {
      flex-direction: row;
    }
  }
  
  @container (min-width: 600px) {
    .container-md\:grid-cols-2 {
      grid-template-columns: repeat(2, 1fr);
    }
  }
}

/* Subgrid (progressive enhancement) */
@supports (grid-template-columns: subgrid) {
  .subgrid-compat {
    display: grid;
    grid-template-columns: subgrid;
  }
}

/* CSS nesting (progressive enhancement) */
@supports (selector(&)) {
  .nesting-compat {
    & > * {
      margin: 0;
    }
  }
}

/* Color-mix (progressive enhancement) */
@supports (color: color-mix(in srgb, red, blue)) {
  .color-mix-compat {
    --hover-color: color-mix(in srgb, hsl(var(--primary)) 90%, black);
  }
}
