import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

// 20 Theme definitions with pure white backgrounds and distinct accent color palettes
// All themes maintain WCAG accessibility standards for contrast
export const THEMES = {
  aurora: {
    id: 'aurora',
    name: 'Aurora Teal',
    description: 'Cosmic teal with aurora glow',
    preview: { primary: '174 72% 35%', accent: '160 70% 38%', secondary: '174 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '220 25% 15%',
      card: '0 0% 100%',
      cardForeground: '220 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '220 25% 15%',
      primary: '174 72% 35%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '174 80% 45%',
      secondary: '174 40% 95%',
      secondaryForeground: '174 60% 25%',
      muted: '220 15% 95%',
      mutedForeground: '220 15% 40%',
      accent: '160 70% 38%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '220 15% 88%',
      input: '220 15% 92%',
      ring: '174 72% 35%',
    },
    dark: {
      background: '220 20% 10%',
      foreground: '200 50% 95%',
      card: '220 20% 13%',
      cardForeground: '200 50% 95%',
      popover: '220 20% 11%',
      popoverForeground: '200 50% 95%',
      primary: '174 72% 50%',
      primaryForeground: '220 20% 10%',
      primaryGlow: '174 80% 60%',
      secondary: '174 30% 20%',
      secondaryForeground: '174 60% 80%',
      muted: '220 15% 18%',
      mutedForeground: '220 15% 65%',
      accent: '160 70% 45%',
      accentForeground: '220 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '220 15% 22%',
      input: '220 15% 18%',
      ring: '174 72% 50%',
    },
  },
  pink: {
    id: 'pink',
    name: 'Rose Blossom',
    description: 'Soft pink with romantic vibes',
    preview: { primary: '330 81% 50%', accent: '340 75% 48%', secondary: '330 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '330 25% 12%',
      card: '0 0% 100%',
      cardForeground: '330 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '330 25% 12%',
      primary: '330 81% 50%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '330 85% 60%',
      secondary: '330 40% 95%',
      secondaryForeground: '330 60% 30%',
      muted: '330 15% 95%',
      mutedForeground: '330 15% 40%',
      accent: '340 75% 48%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '330 15% 88%',
      input: '330 15% 92%',
      ring: '330 81% 50%',
    },
    dark: {
      background: '330 20% 10%',
      foreground: '330 50% 95%',
      card: '330 20% 13%',
      cardForeground: '330 50% 95%',
      popover: '330 20% 11%',
      popoverForeground: '330 50% 95%',
      primary: '330 81% 65%',
      primaryForeground: '330 20% 10%',
      primaryGlow: '330 85% 75%',
      secondary: '330 30% 20%',
      secondaryForeground: '330 60% 80%',
      muted: '330 15% 18%',
      mutedForeground: '330 15% 65%',
      accent: '340 75% 60%',
      accentForeground: '330 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '330 15% 22%',
      input: '330 15% 18%',
      ring: '330 81% 65%',
    },
  },
  ocean: {
    id: 'ocean',
    name: 'Ocean Blue',
    description: 'Deep ocean with calm waves',
    preview: { primary: '210 90% 45%', accent: '190 85% 40%', secondary: '210 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '210 25% 12%',
      card: '0 0% 100%',
      cardForeground: '210 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '210 25% 12%',
      primary: '210 90% 45%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '210 95% 55%',
      secondary: '210 40% 95%',
      secondaryForeground: '210 60% 30%',
      muted: '210 15% 95%',
      mutedForeground: '210 15% 40%',
      accent: '190 85% 40%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '210 15% 88%',
      input: '210 15% 92%',
      ring: '210 90% 45%',
    },
    dark: {
      background: '210 20% 10%',
      foreground: '210 50% 95%',
      card: '210 20% 13%',
      cardForeground: '210 50% 95%',
      popover: '210 20% 11%',
      popoverForeground: '210 50% 95%',
      primary: '210 90% 55%',
      primaryForeground: '210 20% 10%',
      primaryGlow: '210 95% 65%',
      secondary: '210 30% 20%',
      secondaryForeground: '210 60% 80%',
      muted: '210 15% 18%',
      mutedForeground: '210 15% 65%',
      accent: '190 85% 50%',
      accentForeground: '210 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '210 15% 22%',
      input: '210 15% 18%',
      ring: '210 90% 55%',
    },
  },
  forest: {
    id: 'forest',
    name: 'Forest Green',
    description: 'Natural green forest vibes',
    preview: { primary: '142 71% 35%', accent: '160 60% 32%', secondary: '142 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '142 25% 10%',
      card: '0 0% 100%',
      cardForeground: '142 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '142 25% 10%',
      primary: '142 71% 35%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '142 80% 45%',
      secondary: '142 40% 95%',
      secondaryForeground: '142 60% 25%',
      muted: '142 15% 95%',
      mutedForeground: '142 15% 40%',
      accent: '160 60% 32%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '142 15% 88%',
      input: '142 15% 92%',
      ring: '142 71% 35%',
    },
    dark: {
      background: '142 20% 10%',
      foreground: '142 50% 95%',
      card: '142 20% 13%',
      cardForeground: '142 50% 95%',
      popover: '142 20% 11%',
      popoverForeground: '142 50% 95%',
      primary: '142 71% 50%',
      primaryForeground: '142 20% 10%',
      primaryGlow: '142 80% 60%',
      secondary: '142 30% 20%',
      secondaryForeground: '142 60% 80%',
      muted: '142 15% 18%',
      mutedForeground: '142 15% 65%',
      accent: '160 60% 45%',
      accentForeground: '142 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '142 15% 22%',
      input: '142 15% 18%',
      ring: '142 71% 50%',
    },
  },
  sunset: {
    id: 'sunset',
    name: 'Sunset Orange',
    description: 'Warm sunset glow',
    preview: { primary: '25 95% 48%', accent: '15 90% 45%', secondary: '25 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '25 25% 12%',
      card: '0 0% 100%',
      cardForeground: '25 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '25 25% 12%',
      primary: '25 95% 48%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '25 100% 58%',
      secondary: '25 40% 95%',
      secondaryForeground: '25 60% 30%',
      muted: '25 15% 95%',
      mutedForeground: '25 15% 40%',
      accent: '15 90% 45%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '25 15% 88%',
      input: '25 15% 92%',
      ring: '25 95% 48%',
    },
    dark: {
      background: '25 20% 10%',
      foreground: '25 50% 95%',
      card: '25 20% 13%',
      cardForeground: '25 50% 95%',
      popover: '25 20% 11%',
      popoverForeground: '25 50% 95%',
      primary: '25 95% 58%',
      primaryForeground: '25 20% 10%',
      primaryGlow: '25 100% 68%',
      secondary: '25 30% 20%',
      secondaryForeground: '25 60% 80%',
      muted: '25 15% 18%',
      mutedForeground: '25 15% 65%',
      accent: '15 90% 55%',
      accentForeground: '25 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '25 15% 22%',
      input: '25 15% 18%',
      ring: '25 95% 58%',
    },
  },
  lavender: {
    id: 'lavender',
    name: 'Lavender Dream',
    description: 'Soft purple lavender fields',
    preview: { primary: '270 65% 50%', accent: '280 60% 48%', secondary: '270 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '270 25% 12%',
      card: '0 0% 100%',
      cardForeground: '270 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '270 25% 12%',
      primary: '270 65% 50%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '270 75% 60%',
      secondary: '270 40% 95%',
      secondaryForeground: '270 60% 30%',
      muted: '270 15% 95%',
      mutedForeground: '270 15% 40%',
      accent: '280 60% 48%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '270 15% 88%',
      input: '270 15% 92%',
      ring: '270 65% 50%',
    },
    dark: {
      background: '270 20% 10%',
      foreground: '270 50% 95%',
      card: '270 20% 13%',
      cardForeground: '270 50% 95%',
      popover: '270 20% 11%',
      popoverForeground: '270 50% 95%',
      primary: '270 65% 65%',
      primaryForeground: '270 20% 10%',
      primaryGlow: '270 75% 75%',
      secondary: '270 30% 20%',
      secondaryForeground: '270 60% 80%',
      muted: '270 15% 18%',
      mutedForeground: '270 15% 65%',
      accent: '280 60% 60%',
      accentForeground: '270 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '270 15% 22%',
      input: '270 15% 18%',
      ring: '270 65% 65%',
    },
  },
  crimson: {
    id: 'crimson',
    name: 'Crimson Red',
    description: 'Bold crimson passion',
    preview: { primary: '350 80% 45%', accent: '0 75% 48%', secondary: '350 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '350 25% 12%',
      card: '0 0% 100%',
      cardForeground: '350 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '350 25% 12%',
      primary: '350 80% 45%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '350 85% 55%',
      secondary: '350 40% 95%',
      secondaryForeground: '350 60% 30%',
      muted: '350 15% 95%',
      mutedForeground: '350 15% 40%',
      accent: '0 75% 48%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '350 15% 88%',
      input: '350 15% 92%',
      ring: '350 80% 45%',
    },
    dark: {
      background: '350 20% 10%',
      foreground: '350 50% 95%',
      card: '350 20% 13%',
      cardForeground: '350 50% 95%',
      popover: '350 20% 11%',
      popoverForeground: '350 50% 95%',
      primary: '350 80% 55%',
      primaryForeground: '350 20% 10%',
      primaryGlow: '350 85% 65%',
      secondary: '350 30% 20%',
      secondaryForeground: '350 60% 80%',
      muted: '350 15% 18%',
      mutedForeground: '350 15% 65%',
      accent: '0 75% 60%',
      accentForeground: '350 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '350 15% 22%',
      input: '350 15% 18%',
      ring: '350 80% 55%',
    },
  },
  gold: {
    id: 'gold',
    name: 'Golden Amber',
    description: 'Luxurious gold and amber',
    preview: { primary: '45 90% 42%', accent: '38 85% 44%', secondary: '45 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '45 25% 10%',
      card: '0 0% 100%',
      cardForeground: '45 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '45 25% 10%',
      primary: '45 90% 42%',
      primaryForeground: '45 25% 8%',
      primaryGlow: '45 95% 52%',
      secondary: '45 40% 95%',
      secondaryForeground: '45 60% 25%',
      muted: '45 15% 95%',
      mutedForeground: '45 15% 40%',
      accent: '38 85% 44%',
      accentForeground: '45 25% 8%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '45 15% 88%',
      input: '45 15% 92%',
      ring: '45 90% 42%',
    },
    dark: {
      background: '45 20% 10%',
      foreground: '45 50% 95%',
      card: '45 20% 13%',
      cardForeground: '45 50% 95%',
      popover: '45 20% 11%',
      popoverForeground: '45 50% 95%',
      primary: '45 90% 55%',
      primaryForeground: '45 20% 10%',
      primaryGlow: '45 95% 65%',
      secondary: '45 30% 20%',
      secondaryForeground: '45 60% 80%',
      muted: '45 15% 18%',
      mutedForeground: '45 15% 65%',
      accent: '38 85% 55%',
      accentForeground: '45 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '45 15% 22%',
      input: '45 15% 18%',
      ring: '45 90% 55%',
    },
  },
  mint: {
    id: 'mint',
    name: 'Fresh Mint',
    description: 'Cool refreshing mint',
    preview: { primary: '165 72% 38%', accent: '155 65% 35%', secondary: '165 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '165 25% 10%',
      card: '0 0% 100%',
      cardForeground: '165 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '165 25% 10%',
      primary: '165 72% 38%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '165 80% 48%',
      secondary: '165 40% 95%',
      secondaryForeground: '165 60% 25%',
      muted: '165 15% 95%',
      mutedForeground: '165 15% 40%',
      accent: '155 65% 35%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '165 15% 88%',
      input: '165 15% 92%',
      ring: '165 72% 38%',
    },
    dark: {
      background: '165 20% 10%',
      foreground: '165 50% 95%',
      card: '165 20% 13%',
      cardForeground: '165 50% 95%',
      popover: '165 20% 11%',
      popoverForeground: '165 50% 95%',
      primary: '165 72% 50%',
      primaryForeground: '165 20% 10%',
      primaryGlow: '165 80% 60%',
      secondary: '165 30% 20%',
      secondaryForeground: '165 60% 80%',
      muted: '165 15% 18%',
      mutedForeground: '165 15% 65%',
      accent: '155 65% 48%',
      accentForeground: '165 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '165 15% 22%',
      input: '165 15% 18%',
      ring: '165 72% 50%',
    },
  },
  slate: {
    id: 'slate',
    name: 'Slate Gray',
    description: 'Modern neutral slate',
    preview: { primary: '215 25% 38%', accent: '220 20% 42%', secondary: '215 15% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '215 25% 10%',
      card: '0 0% 100%',
      cardForeground: '215 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '215 25% 10%',
      primary: '215 25% 38%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '215 30% 48%',
      secondary: '215 15% 95%',
      secondaryForeground: '215 25% 30%',
      muted: '215 10% 95%',
      mutedForeground: '215 15% 40%',
      accent: '220 20% 42%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '215 10% 88%',
      input: '215 10% 92%',
      ring: '215 25% 38%',
    },
    dark: {
      background: '215 20% 10%',
      foreground: '215 20% 95%',
      card: '215 20% 13%',
      cardForeground: '215 20% 95%',
      popover: '215 20% 11%',
      popoverForeground: '215 20% 95%',
      primary: '215 25% 55%',
      primaryForeground: '215 20% 10%',
      primaryGlow: '215 30% 65%',
      secondary: '215 15% 20%',
      secondaryForeground: '215 25% 80%',
      muted: '215 15% 18%',
      mutedForeground: '215 10% 65%',
      accent: '220 20% 55%',
      accentForeground: '215 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '215 15% 22%',
      input: '215 15% 18%',
      ring: '215 25% 55%',
    },
  },
  cherry: {
    id: 'cherry',
    name: 'Cherry Blossom',
    description: 'Japanese cherry blossom',
    preview: { primary: '340 80% 55%', accent: '350 75% 52%', secondary: '340 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '340 25% 12%',
      card: '0 0% 100%',
      cardForeground: '340 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '340 25% 12%',
      primary: '340 80% 55%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '340 85% 65%',
      secondary: '340 40% 95%',
      secondaryForeground: '340 60% 30%',
      muted: '340 15% 95%',
      mutedForeground: '340 15% 40%',
      accent: '350 75% 52%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '340 15% 88%',
      input: '340 15% 92%',
      ring: '340 80% 55%',
    },
    dark: {
      background: '340 20% 10%',
      foreground: '340 50% 95%',
      card: '340 20% 13%',
      cardForeground: '340 50% 95%',
      popover: '340 20% 11%',
      popoverForeground: '340 50% 95%',
      primary: '340 80% 70%',
      primaryForeground: '340 20% 10%',
      primaryGlow: '340 85% 80%',
      secondary: '340 30% 20%',
      secondaryForeground: '340 60% 80%',
      muted: '340 15% 18%',
      mutedForeground: '340 15% 65%',
      accent: '350 75% 65%',
      accentForeground: '340 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '340 15% 22%',
      input: '340 15% 18%',
      ring: '340 80% 70%',
    },
  },
  cobalt: {
    id: 'cobalt',
    name: 'Cobalt Blue',
    description: 'Deep rich cobalt',
    preview: { primary: '225 85% 48%', accent: '230 80% 45%', secondary: '225 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '225 25% 10%',
      card: '0 0% 100%',
      cardForeground: '225 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '225 25% 10%',
      primary: '225 85% 48%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '225 90% 58%',
      secondary: '225 40% 95%',
      secondaryForeground: '225 60% 30%',
      muted: '225 15% 95%',
      mutedForeground: '225 15% 40%',
      accent: '230 80% 45%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '225 15% 88%',
      input: '225 15% 92%',
      ring: '225 85% 48%',
    },
    dark: {
      background: '225 20% 10%',
      foreground: '225 50% 95%',
      card: '225 20% 13%',
      cardForeground: '225 50% 95%',
      popover: '225 20% 11%',
      popoverForeground: '225 50% 95%',
      primary: '225 85% 60%',
      primaryForeground: '225 20% 10%',
      primaryGlow: '225 90% 70%',
      secondary: '225 30% 20%',
      secondaryForeground: '225 60% 80%',
      muted: '225 15% 18%',
      mutedForeground: '225 15% 65%',
      accent: '230 80% 55%',
      accentForeground: '225 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '225 15% 22%',
      input: '225 15% 18%',
      ring: '225 85% 60%',
    },
  },
  coral: {
    id: 'coral',
    name: 'Coral Reef',
    description: 'Vibrant coral tones',
    preview: { primary: '16 85% 52%', accent: '10 80% 48%', secondary: '16 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '16 25% 12%',
      card: '0 0% 100%',
      cardForeground: '16 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '16 25% 12%',
      primary: '16 85% 52%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '16 90% 62%',
      secondary: '16 40% 95%',
      secondaryForeground: '16 60% 30%',
      muted: '16 15% 95%',
      mutedForeground: '16 15% 40%',
      accent: '10 80% 48%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '16 15% 88%',
      input: '16 15% 92%',
      ring: '16 85% 52%',
    },
    dark: {
      background: '16 20% 10%',
      foreground: '16 50% 95%',
      card: '16 20% 13%',
      cardForeground: '16 50% 95%',
      popover: '16 20% 11%',
      popoverForeground: '16 50% 95%',
      primary: '16 85% 65%',
      primaryForeground: '16 20% 10%',
      primaryGlow: '16 90% 75%',
      secondary: '16 30% 20%',
      secondaryForeground: '16 60% 80%',
      muted: '16 15% 18%',
      mutedForeground: '16 15% 65%',
      accent: '10 80% 60%',
      accentForeground: '16 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '16 15% 22%',
      input: '16 15% 18%',
      ring: '16 85% 65%',
    },
  },
  wine: {
    id: 'wine',
    name: 'Wine Berry',
    description: 'Rich wine and berry',
    preview: { primary: '310 60% 38%', accent: '320 55% 42%', secondary: '310 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '310 25% 10%',
      card: '0 0% 100%',
      cardForeground: '310 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '310 25% 10%',
      primary: '310 60% 38%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '310 70% 48%',
      secondary: '310 40% 95%',
      secondaryForeground: '310 60% 25%',
      muted: '310 15% 95%',
      mutedForeground: '310 15% 40%',
      accent: '320 55% 42%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '310 15% 88%',
      input: '310 15% 92%',
      ring: '310 60% 38%',
    },
    dark: {
      background: '310 20% 10%',
      foreground: '310 50% 95%',
      card: '310 20% 13%',
      cardForeground: '310 50% 95%',
      popover: '310 20% 11%',
      popoverForeground: '310 50% 95%',
      primary: '310 60% 55%',
      primaryForeground: '310 20% 10%',
      primaryGlow: '310 70% 65%',
      secondary: '310 30% 20%',
      secondaryForeground: '310 60% 80%',
      muted: '310 15% 18%',
      mutedForeground: '310 15% 65%',
      accent: '320 55% 55%',
      accentForeground: '310 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '310 15% 22%',
      input: '310 15% 18%',
      ring: '310 60% 55%',
    },
  },
  midnight: {
    id: 'midnight',
    name: 'Midnight Indigo',
    description: 'Deep midnight sky',
    preview: { primary: '245 70% 48%', accent: '255 65% 45%', secondary: '245 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '245 25% 10%',
      card: '0 0% 100%',
      cardForeground: '245 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '245 25% 10%',
      primary: '245 70% 48%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '245 80% 58%',
      secondary: '245 40% 95%',
      secondaryForeground: '245 60% 30%',
      muted: '245 15% 95%',
      mutedForeground: '245 15% 40%',
      accent: '255 65% 45%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '245 15% 88%',
      input: '245 15% 92%',
      ring: '245 70% 48%',
    },
    dark: {
      background: '245 20% 8%',
      foreground: '245 50% 95%',
      card: '245 20% 11%',
      cardForeground: '245 50% 95%',
      popover: '245 20% 9%',
      popoverForeground: '245 50% 95%',
      primary: '245 70% 60%',
      primaryForeground: '245 20% 8%',
      primaryGlow: '245 80% 70%',
      secondary: '245 30% 18%',
      secondaryForeground: '245 60% 80%',
      muted: '245 15% 16%',
      mutedForeground: '245 15% 65%',
      accent: '255 65% 55%',
      accentForeground: '245 20% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '245 15% 20%',
      input: '245 15% 16%',
      ring: '245 70% 60%',
    },
  },
  peach: {
    id: 'peach',
    name: 'Peach Blush',
    description: 'Soft warm peach',
    preview: { primary: '20 85% 55%', accent: '12 80% 52%', secondary: '20 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '20 25% 12%',
      card: '0 0% 100%',
      cardForeground: '20 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '20 25% 12%',
      primary: '20 85% 55%',
      primaryForeground: '20 25% 8%',
      primaryGlow: '20 90% 65%',
      secondary: '20 40% 95%',
      secondaryForeground: '20 60% 30%',
      muted: '20 15% 95%',
      mutedForeground: '20 15% 40%',
      accent: '12 80% 52%',
      accentForeground: '20 25% 8%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '20 15% 88%',
      input: '20 15% 92%',
      ring: '20 85% 55%',
    },
    dark: {
      background: '20 20% 10%',
      foreground: '20 50% 95%',
      card: '20 20% 13%',
      cardForeground: '20 50% 95%',
      popover: '20 20% 11%',
      popoverForeground: '20 50% 95%',
      primary: '20 85% 70%',
      primaryForeground: '20 20% 10%',
      primaryGlow: '20 90% 80%',
      secondary: '20 30% 20%',
      secondaryForeground: '20 60% 80%',
      muted: '20 15% 18%',
      mutedForeground: '20 15% 65%',
      accent: '12 80% 65%',
      accentForeground: '20 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '20 15% 22%',
      input: '20 15% 18%',
      ring: '20 85% 70%',
    },
  },
  emerald: {
    id: 'emerald',
    name: 'Emerald Gem',
    description: 'Precious emerald green',
    preview: { primary: '155 80% 32%', accent: '145 75% 30%', secondary: '155 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '155 25% 8%',
      card: '0 0% 100%',
      cardForeground: '155 25% 8%',
      popover: '0 0% 100%',
      popoverForeground: '155 25% 8%',
      primary: '155 80% 32%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '155 85% 42%',
      secondary: '155 40% 95%',
      secondaryForeground: '155 60% 22%',
      muted: '155 15% 95%',
      mutedForeground: '155 15% 40%',
      accent: '145 75% 30%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '155 15% 88%',
      input: '155 15% 92%',
      ring: '155 80% 32%',
    },
    dark: {
      background: '155 20% 8%',
      foreground: '155 50% 95%',
      card: '155 20% 11%',
      cardForeground: '155 50% 95%',
      popover: '155 20% 9%',
      popoverForeground: '155 50% 95%',
      primary: '155 80% 48%',
      primaryForeground: '155 20% 8%',
      primaryGlow: '155 85% 58%',
      secondary: '155 30% 18%',
      secondaryForeground: '155 60% 80%',
      muted: '155 15% 16%',
      mutedForeground: '155 15% 65%',
      accent: '145 75% 45%',
      accentForeground: '155 20% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '155 15% 20%',
      input: '155 15% 16%',
      ring: '155 80% 48%',
    },
  },
  sapphire: {
    id: 'sapphire',
    name: 'Royal Sapphire',
    description: 'Royal blue sapphire',
    preview: { primary: '220 85% 45%', accent: '228 80% 48%', secondary: '220 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '220 25% 10%',
      card: '0 0% 100%',
      cardForeground: '220 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '220 25% 10%',
      primary: '220 85% 45%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '220 90% 55%',
      secondary: '220 40% 95%',
      secondaryForeground: '220 60% 30%',
      muted: '220 15% 95%',
      mutedForeground: '220 15% 40%',
      accent: '228 80% 48%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '220 15% 88%',
      input: '220 15% 92%',
      ring: '220 85% 45%',
    },
    dark: {
      background: '220 20% 9%',
      foreground: '220 50% 95%',
      card: '220 20% 12%',
      cardForeground: '220 50% 95%',
      popover: '220 20% 10%',
      popoverForeground: '220 50% 95%',
      primary: '220 85% 58%',
      primaryForeground: '220 20% 9%',
      primaryGlow: '220 90% 68%',
      secondary: '220 30% 19%',
      secondaryForeground: '220 60% 80%',
      muted: '220 15% 17%',
      mutedForeground: '220 15% 65%',
      accent: '228 80% 60%',
      accentForeground: '220 20% 9%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '220 15% 21%',
      input: '220 15% 17%',
      ring: '220 85% 58%',
    },
  },
  rose: {
    id: 'rose',
    name: 'Rose Gold',
    description: 'Elegant rose gold',
    preview: { primary: '345 75% 52%', accent: '355 70% 48%', secondary: '345 40% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '345 25% 12%',
      card: '0 0% 100%',
      cardForeground: '345 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '345 25% 12%',
      primary: '345 75% 52%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '345 80% 62%',
      secondary: '345 40% 95%',
      secondaryForeground: '345 60% 30%',
      muted: '345 15% 95%',
      mutedForeground: '345 15% 40%',
      accent: '355 70% 48%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '345 15% 88%',
      input: '345 15% 92%',
      ring: '345 75% 52%',
    },
    dark: {
      background: '345 20% 10%',
      foreground: '345 50% 95%',
      card: '345 20% 13%',
      cardForeground: '345 50% 95%',
      popover: '345 20% 11%',
      popoverForeground: '345 50% 95%',
      primary: '345 75% 65%',
      primaryForeground: '345 20% 10%',
      primaryGlow: '345 80% 75%',
      secondary: '345 30% 20%',
      secondaryForeground: '345 60% 80%',
      muted: '345 15% 18%',
      mutedForeground: '345 15% 65%',
      accent: '355 70% 60%',
      accentForeground: '345 20% 10%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '345 15% 22%',
      input: '345 15% 18%',
      ring: '345 75% 65%',
    },
  },
  noir: {
    id: 'noir',
    name: 'Noir Elegance',
    description: 'Elegant monochrome noir',
    preview: { primary: '0 0% 12%', accent: '0 0% 22%', secondary: '0 0% 95%' },
    light: {
      background: '0 0% 100%',
      foreground: '0 0% 8%',
      card: '0 0% 100%',
      cardForeground: '0 0% 8%',
      popover: '0 0% 100%',
      popoverForeground: '0 0% 8%',
      primary: '0 0% 12%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '0 0% 22%',
      secondary: '0 0% 95%',
      secondaryForeground: '0 0% 22%',
      muted: '0 0% 95%',
      mutedForeground: '0 0% 40%',
      accent: '0 0% 22%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 45%',
      destructiveForeground: '0 0% 100%',
      border: '0 0% 88%',
      input: '0 0% 92%',
      ring: '0 0% 12%',
    },
    dark: {
      background: '0 0% 6%',
      foreground: '0 0% 95%',
      card: '0 0% 9%',
      cardForeground: '0 0% 95%',
      popover: '0 0% 7%',
      popoverForeground: '0 0% 95%',
      primary: '0 0% 95%',
      primaryForeground: '0 0% 6%',
      primaryGlow: '0 0% 100%',
      secondary: '0 0% 15%',
      secondaryForeground: '0 0% 80%',
      muted: '0 0% 13%',
      mutedForeground: '0 0% 65%',
      accent: '0 0% 85%',
      accentForeground: '0 0% 6%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '0 0% 20%',
      input: '0 0% 13%',
      ring: '0 0% 95%',
    },
  },
} as const;

export type ThemeId = keyof typeof THEMES;
export type ThemeMode = 'light' | 'dark' | 'system';

interface ThemeContextType {
  themeId: ThemeId;
  mode: ThemeMode;
  resolvedMode: 'light' | 'dark';
  setTheme: (themeId: ThemeId) => void;
  setMode: (mode: ThemeMode) => void;
  themes: typeof THEMES;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

const STORAGE_KEY_THEME = 'app-theme';
const STORAGE_KEY_MODE = 'app-theme-mode';

export function ThemeProvider({ children }: { children: ReactNode }) {
  const [themeId, setThemeId] = useState<ThemeId>(() => {
    if (typeof window !== 'undefined') {
      return (localStorage.getItem(STORAGE_KEY_THEME) as ThemeId) || 'aurora';
    }
    return 'aurora';
  });

  const [mode, setModeState] = useState<ThemeMode>(() => {
    if (typeof window !== 'undefined') {
      return (localStorage.getItem(STORAGE_KEY_MODE) as ThemeMode) || 'light';
    }
    return 'light';
  });

  const [resolvedMode, setResolvedMode] = useState<'light' | 'dark'>('light');

  // Resolve system preference
  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    
    const updateResolvedMode = () => {
      if (mode === 'system') {
        setResolvedMode(mediaQuery.matches ? 'dark' : 'light');
      } else {
        setResolvedMode(mode);
      }
    };

    updateResolvedMode();
    mediaQuery.addEventListener('change', updateResolvedMode);
    return () => mediaQuery.removeEventListener('change', updateResolvedMode);
  }, [mode]);

  // Apply theme to document
  useEffect(() => {
    const theme = THEMES[themeId];
    if (!theme) return;

    const root = document.documentElement;
    const colors = resolvedMode === 'dark' ? theme.dark : theme.light;
    
    // Apply all color variables
    Object.entries(colors).forEach(([key, value]) => {
      const cssVarName = key.replace(/([A-Z])/g, '-$1').toLowerCase();
      root.style.setProperty(`--${cssVarName}`, value);
    });

    // Semantic status colors - compatible with white backgrounds
    const statusColors = resolvedMode === 'dark' ? {
      success: '142 71% 50%',
      successForeground: '142 20% 10%',
      warning: '38 92% 55%',
      warningForeground: '38 20% 10%',
      info: '210 90% 55%',
      infoForeground: '210 20% 10%',
      error: '0 65% 50%',
      errorForeground: '0 0% 100%',
      online: '142 71% 50%',
      onlineForeground: '142 20% 10%',
      offline: '220 15% 50%',
      offlineForeground: '0 0% 100%',
      busy: '38 92% 55%',
      busyForeground: '38 20% 10%',
      away: '38 92% 55%',
      awayForeground: '38 20% 10%',
      pending: '38 92% 55%',
      pendingForeground: '38 20% 10%',
      verified: '142 71% 50%',
      verifiedForeground: '142 20% 10%',
      male: '210 90% 55%',
      maleForeground: '210 20% 10%',
      female: '330 81% 65%',
      femaleForeground: '330 20% 10%',
      crown: '45 90% 55%',
      crownForeground: '45 20% 10%',
      gift: '330 81% 65%',
      giftForeground: '330 20% 10%',
      wallet: '210 90% 55%',
      walletForeground: '210 20% 10%',
      earnings: '142 71% 50%',
      earningsForeground: '142 20% 10%',
      live: '0 65% 55%',
      liveForeground: '0 0% 100%',
    } : {
      success: '142 71% 35%',
      successForeground: '0 0% 100%',
      warning: '38 92% 42%',
      warningForeground: '0 0% 100%',
      info: '210 90% 42%',
      infoForeground: '0 0% 100%',
      error: '0 72% 42%',
      errorForeground: '0 0% 100%',
      online: '142 71% 35%',
      onlineForeground: '0 0% 100%',
      offline: '220 15% 55%',
      offlineForeground: '0 0% 100%',
      busy: '38 92% 42%',
      busyForeground: '0 0% 100%',
      away: '38 92% 42%',
      awayForeground: '0 0% 100%',
      pending: '38 92% 42%',
      pendingForeground: '0 0% 100%',
      verified: '142 71% 35%',
      verifiedForeground: '0 0% 100%',
      male: '210 90% 42%',
      maleForeground: '0 0% 100%',
      female: '330 81% 48%',
      femaleForeground: '0 0% 100%',
      crown: '45 90% 42%',
      crownForeground: '45 25% 8%',
      gift: '330 81% 48%',
      giftForeground: '0 0% 100%',
      wallet: '210 90% 42%',
      walletForeground: '0 0% 100%',
      earnings: '142 71% 35%',
      earningsForeground: '0 0% 100%',
      live: '0 72% 42%',
      liveForeground: '0 0% 100%',
    };

    Object.entries(statusColors).forEach(([key, value]) => {
      const cssVarName = key.replace(/([A-Z])/g, '-$1').toLowerCase();
      root.style.setProperty(`--${cssVarName}`, value);
    });

    // Video/Camera overlay colors - always dark for media display
    root.style.setProperty('--video-bg', '0 0% 5%');
    root.style.setProperty('--video-overlay', '0 0% 0%');
    root.style.setProperty('--video-text', '0 0% 100%');

    // Sidebar colors based on theme
    const sidebarColors = resolvedMode === 'dark' ? {
      sidebarBackground: colors.card,
      sidebarForeground: colors.cardForeground,
      sidebarPrimary: colors.primary,
      sidebarPrimaryForeground: colors.primaryForeground,
      sidebarAccent: colors.secondary,
      sidebarAccentForeground: colors.secondaryForeground,
      sidebarBorder: colors.border,
      sidebarRing: colors.ring,
    } : {
      sidebarBackground: '220 20% 14%',
      sidebarForeground: '0 0% 95%',
      sidebarPrimary: colors.primary,
      sidebarPrimaryForeground: '0 0% 100%',
      sidebarAccent: '220 15% 22%',
      sidebarAccentForeground: '0 0% 95%',
      sidebarBorder: '220 15% 22%',
      sidebarRing: colors.primary,
    };

    Object.entries(sidebarColors).forEach(([key, value]) => {
      const cssVarName = key.replace(/([A-Z])/g, '-$1').toLowerCase();
      root.style.setProperty(`--${cssVarName}`, value);
    });

    // Apply dark mode class
    if (resolvedMode === 'dark') {
      root.classList.add('dark');
    } else {
      root.classList.remove('dark');
    }

    // Store preferences
    localStorage.setItem(STORAGE_KEY_THEME, themeId);
    localStorage.setItem(STORAGE_KEY_MODE, mode);
  }, [themeId, mode, resolvedMode]);

  const setTheme = (id: ThemeId) => {
    if (THEMES[id]) {
      setThemeId(id);
    }
  };

  const setMode = (newMode: ThemeMode) => {
    setModeState(newMode);
  };

  return (
    <ThemeContext.Provider
      value={{
        themeId,
        mode,
        resolvedMode,
        setTheme,
        setMode,
        themes: THEMES,
      }}
    >
      {children}
    </ThemeContext.Provider>
  );
}

export function useAppTheme() {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useAppTheme must be used within a ThemeProvider');
  }
  return context;
}
