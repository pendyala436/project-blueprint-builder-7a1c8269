import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

// 20 Theme definitions with complete color palettes
export const THEMES = {
  aurora: {
    id: 'aurora',
    name: 'Aurora',
    description: 'Cosmic teal with aurora glow',
    preview: { primary: '174 72% 40%', accent: '160 70% 42%', secondary: '270 50% 94%' },
    light: {
      background: '220 25% 97%',
      foreground: '230 25% 18%',
      card: '210 30% 98%',
      cardForeground: '230 25% 18%',
      popover: '0 0% 100%',
      popoverForeground: '230 25% 18%',
      primary: '174 72% 40%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '174 80% 55%',
      secondary: '270 50% 94%',
      secondaryForeground: '270 60% 35%',
      muted: '220 20% 94%',
      mutedForeground: '220 15% 45%',
      accent: '160 70% 42%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '220 20% 88%',
      input: '220 20% 92%',
      ring: '174 72% 40%',
    },
    dark: {
      background: '230 35% 8%',
      foreground: '200 50% 95%',
      card: '230 30% 12%',
      cardForeground: '200 50% 95%',
      popover: '230 35% 10%',
      popoverForeground: '200 50% 95%',
      primary: '174 72% 50%',
      primaryForeground: '230 35% 8%',
      primaryGlow: '174 80% 60%',
      secondary: '270 45% 20%',
      secondaryForeground: '270 60% 80%',
      muted: '230 25% 18%',
      mutedForeground: '220 20% 65%',
      accent: '160 70% 45%',
      accentForeground: '230 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '230 25% 20%',
      input: '230 25% 18%',
      ring: '174 72% 50%',
    },
  },
  pink: {
    id: 'pink',
    name: 'Rose Blossom',
    description: 'Soft pink with romantic vibes',
    preview: { primary: '330 81% 60%', accent: '340 75% 55%', secondary: '320 50% 94%' },
    light: {
      background: '330 30% 98%',
      foreground: '330 25% 15%',
      card: '330 35% 99%',
      cardForeground: '330 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '330 25% 15%',
      primary: '330 81% 60%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '330 85% 70%',
      secondary: '320 50% 94%',
      secondaryForeground: '320 60% 35%',
      muted: '330 20% 94%',
      mutedForeground: '330 15% 45%',
      accent: '340 75% 55%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '330 20% 88%',
      input: '330 20% 92%',
      ring: '330 81% 60%',
    },
    dark: {
      background: '330 30% 8%',
      foreground: '330 50% 95%',
      card: '330 25% 12%',
      cardForeground: '330 50% 95%',
      popover: '330 30% 10%',
      popoverForeground: '330 50% 95%',
      primary: '330 81% 65%',
      primaryForeground: '330 30% 8%',
      primaryGlow: '330 85% 75%',
      secondary: '320 45% 20%',
      secondaryForeground: '320 60% 80%',
      muted: '330 25% 18%',
      mutedForeground: '330 20% 65%',
      accent: '340 75% 60%',
      accentForeground: '330 30% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '330 25% 20%',
      input: '330 25% 18%',
      ring: '330 81% 65%',
    },
  },
  ocean: {
    id: 'ocean',
    name: 'Ocean Blue',
    description: 'Deep ocean with calm waves',
    preview: { primary: '210 90% 50%', accent: '190 85% 45%', secondary: '200 50% 94%' },
    light: {
      background: '210 30% 98%',
      foreground: '210 25% 15%',
      card: '210 35% 99%',
      cardForeground: '210 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '210 25% 15%',
      primary: '210 90% 50%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '210 95% 60%',
      secondary: '200 50% 94%',
      secondaryForeground: '200 60% 35%',
      muted: '210 20% 94%',
      mutedForeground: '210 15% 45%',
      accent: '190 85% 45%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '210 20% 88%',
      input: '210 20% 92%',
      ring: '210 90% 50%',
    },
    dark: {
      background: '210 35% 8%',
      foreground: '210 50% 95%',
      card: '210 30% 12%',
      cardForeground: '210 50% 95%',
      popover: '210 35% 10%',
      popoverForeground: '210 50% 95%',
      primary: '210 90% 55%',
      primaryForeground: '210 35% 8%',
      primaryGlow: '210 95% 65%',
      secondary: '200 45% 20%',
      secondaryForeground: '200 60% 80%',
      muted: '210 25% 18%',
      mutedForeground: '210 20% 65%',
      accent: '190 85% 50%',
      accentForeground: '210 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '210 25% 20%',
      input: '210 25% 18%',
      ring: '210 90% 55%',
    },
  },
  forest: {
    id: 'forest',
    name: 'Forest Green',
    description: 'Natural green forest vibes',
    preview: { primary: '142 71% 45%', accent: '160 60% 40%', secondary: '140 50% 94%' },
    light: {
      background: '140 30% 98%',
      foreground: '140 25% 12%',
      card: '140 35% 99%',
      cardForeground: '140 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '140 25% 12%',
      primary: '142 71% 45%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '142 80% 55%',
      secondary: '140 50% 94%',
      secondaryForeground: '140 60% 30%',
      muted: '140 20% 94%',
      mutedForeground: '140 15% 45%',
      accent: '160 60% 40%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '140 20% 88%',
      input: '140 20% 92%',
      ring: '142 71% 45%',
    },
    dark: {
      background: '140 35% 8%',
      foreground: '140 50% 95%',
      card: '140 30% 12%',
      cardForeground: '140 50% 95%',
      popover: '140 35% 10%',
      popoverForeground: '140 50% 95%',
      primary: '142 71% 50%',
      primaryForeground: '140 35% 8%',
      primaryGlow: '142 80% 60%',
      secondary: '140 45% 20%',
      secondaryForeground: '140 60% 80%',
      muted: '140 25% 18%',
      mutedForeground: '140 20% 65%',
      accent: '160 60% 45%',
      accentForeground: '140 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '140 25% 20%',
      input: '140 25% 18%',
      ring: '142 71% 50%',
    },
  },
  sunset: {
    id: 'sunset',
    name: 'Sunset Orange',
    description: 'Warm sunset glow',
    preview: { primary: '25 95% 53%', accent: '15 90% 50%', secondary: '30 50% 94%' },
    light: {
      background: '30 30% 98%',
      foreground: '25 25% 15%',
      card: '30 35% 99%',
      cardForeground: '25 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '25 25% 15%',
      primary: '25 95% 53%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '25 100% 63%',
      secondary: '30 50% 94%',
      secondaryForeground: '25 60% 35%',
      muted: '30 20% 94%',
      mutedForeground: '30 15% 45%',
      accent: '15 90% 50%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '30 20% 88%',
      input: '30 20% 92%',
      ring: '25 95% 53%',
    },
    dark: {
      background: '25 35% 8%',
      foreground: '30 50% 95%',
      card: '25 30% 12%',
      cardForeground: '30 50% 95%',
      popover: '25 35% 10%',
      popoverForeground: '30 50% 95%',
      primary: '25 95% 58%',
      primaryForeground: '25 35% 8%',
      primaryGlow: '25 100% 68%',
      secondary: '30 45% 20%',
      secondaryForeground: '30 60% 80%',
      muted: '25 25% 18%',
      mutedForeground: '30 20% 65%',
      accent: '15 90% 55%',
      accentForeground: '25 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '25 25% 20%',
      input: '25 25% 18%',
      ring: '25 95% 58%',
    },
  },
  lavender: {
    id: 'lavender',
    name: 'Lavender Dream',
    description: 'Soft purple lavender fields',
    preview: { primary: '270 65% 60%', accent: '280 60% 55%', secondary: '270 50% 94%' },
    light: {
      background: '270 30% 98%',
      foreground: '270 25% 15%',
      card: '270 35% 99%',
      cardForeground: '270 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '270 25% 15%',
      primary: '270 65% 60%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '270 75% 70%',
      secondary: '270 50% 94%',
      secondaryForeground: '270 60% 35%',
      muted: '270 20% 94%',
      mutedForeground: '270 15% 45%',
      accent: '280 60% 55%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '270 20% 88%',
      input: '270 20% 92%',
      ring: '270 65% 60%',
    },
    dark: {
      background: '270 35% 8%',
      foreground: '270 50% 95%',
      card: '270 30% 12%',
      cardForeground: '270 50% 95%',
      popover: '270 35% 10%',
      popoverForeground: '270 50% 95%',
      primary: '270 65% 65%',
      primaryForeground: '270 35% 8%',
      primaryGlow: '270 75% 75%',
      secondary: '270 45% 20%',
      secondaryForeground: '270 60% 80%',
      muted: '270 25% 18%',
      mutedForeground: '270 20% 65%',
      accent: '280 60% 60%',
      accentForeground: '270 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '270 25% 20%',
      input: '270 25% 18%',
      ring: '270 65% 65%',
    },
  },
  crimson: {
    id: 'crimson',
    name: 'Crimson Red',
    description: 'Bold crimson passion',
    preview: { primary: '350 80% 50%', accent: '0 75% 55%', secondary: '350 50% 94%' },
    light: {
      background: '350 30% 98%',
      foreground: '350 25% 15%',
      card: '350 35% 99%',
      cardForeground: '350 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '350 25% 15%',
      primary: '350 80% 50%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '350 85% 60%',
      secondary: '350 50% 94%',
      secondaryForeground: '350 60% 35%',
      muted: '350 20% 94%',
      mutedForeground: '350 15% 45%',
      accent: '0 75% 55%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '350 20% 88%',
      input: '350 20% 92%',
      ring: '350 80% 50%',
    },
    dark: {
      background: '350 35% 8%',
      foreground: '350 50% 95%',
      card: '350 30% 12%',
      cardForeground: '350 50% 95%',
      popover: '350 35% 10%',
      popoverForeground: '350 50% 95%',
      primary: '350 80% 55%',
      primaryForeground: '350 35% 8%',
      primaryGlow: '350 85% 65%',
      secondary: '350 45% 20%',
      secondaryForeground: '350 60% 80%',
      muted: '350 25% 18%',
      mutedForeground: '350 20% 65%',
      accent: '0 75% 60%',
      accentForeground: '350 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '350 25% 20%',
      input: '350 25% 18%',
      ring: '350 80% 55%',
    },
  },
  gold: {
    id: 'gold',
    name: 'Golden Amber',
    description: 'Luxurious gold and amber',
    preview: { primary: '45 90% 48%', accent: '38 85% 50%', secondary: '45 50% 94%' },
    light: {
      background: '45 30% 98%',
      foreground: '45 25% 12%',
      card: '45 35% 99%',
      cardForeground: '45 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '45 25% 12%',
      primary: '45 90% 48%',
      primaryForeground: '45 25% 10%',
      primaryGlow: '45 95% 58%',
      secondary: '45 50% 94%',
      secondaryForeground: '45 60% 30%',
      muted: '45 20% 94%',
      mutedForeground: '45 15% 45%',
      accent: '38 85% 50%',
      accentForeground: '45 25% 10%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '45 20% 88%',
      input: '45 20% 92%',
      ring: '45 90% 48%',
    },
    dark: {
      background: '45 35% 8%',
      foreground: '45 50% 95%',
      card: '45 30% 12%',
      cardForeground: '45 50% 95%',
      popover: '45 35% 10%',
      popoverForeground: '45 50% 95%',
      primary: '45 90% 55%',
      primaryForeground: '45 35% 8%',
      primaryGlow: '45 95% 65%',
      secondary: '45 45% 20%',
      secondaryForeground: '45 60% 80%',
      muted: '45 25% 18%',
      mutedForeground: '45 20% 65%',
      accent: '38 85% 55%',
      accentForeground: '45 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '45 25% 20%',
      input: '45 25% 18%',
      ring: '45 90% 55%',
    },
  },
  mint: {
    id: 'mint',
    name: 'Fresh Mint',
    description: 'Cool refreshing mint',
    preview: { primary: '165 72% 45%', accent: '155 65% 42%', secondary: '165 50% 94%' },
    light: {
      background: '165 30% 98%',
      foreground: '165 25% 12%',
      card: '165 35% 99%',
      cardForeground: '165 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '165 25% 12%',
      primary: '165 72% 45%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '165 80% 55%',
      secondary: '165 50% 94%',
      secondaryForeground: '165 60% 30%',
      muted: '165 20% 94%',
      mutedForeground: '165 15% 45%',
      accent: '155 65% 42%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '165 20% 88%',
      input: '165 20% 92%',
      ring: '165 72% 45%',
    },
    dark: {
      background: '165 35% 8%',
      foreground: '165 50% 95%',
      card: '165 30% 12%',
      cardForeground: '165 50% 95%',
      popover: '165 35% 10%',
      popoverForeground: '165 50% 95%',
      primary: '165 72% 50%',
      primaryForeground: '165 35% 8%',
      primaryGlow: '165 80% 60%',
      secondary: '165 45% 20%',
      secondaryForeground: '165 60% 80%',
      muted: '165 25% 18%',
      mutedForeground: '165 20% 65%',
      accent: '155 65% 48%',
      accentForeground: '165 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '165 25% 20%',
      input: '165 25% 18%',
      ring: '165 72% 50%',
    },
  },
  slate: {
    id: 'slate',
    name: 'Slate Gray',
    description: 'Modern neutral slate',
    preview: { primary: '215 25% 45%', accent: '220 20% 50%', secondary: '215 20% 94%' },
    light: {
      background: '215 25% 98%',
      foreground: '215 25% 12%',
      card: '215 30% 99%',
      cardForeground: '215 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '215 25% 12%',
      primary: '215 25% 45%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '215 30% 55%',
      secondary: '215 20% 94%',
      secondaryForeground: '215 25% 35%',
      muted: '215 15% 94%',
      mutedForeground: '215 15% 45%',
      accent: '220 20% 50%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '215 15% 88%',
      input: '215 15% 92%',
      ring: '215 25% 45%',
    },
    dark: {
      background: '215 30% 8%',
      foreground: '215 20% 95%',
      card: '215 25% 12%',
      cardForeground: '215 20% 95%',
      popover: '215 30% 10%',
      popoverForeground: '215 20% 95%',
      primary: '215 25% 55%',
      primaryForeground: '215 30% 8%',
      primaryGlow: '215 30% 65%',
      secondary: '215 20% 20%',
      secondaryForeground: '215 25% 80%',
      muted: '215 20% 18%',
      mutedForeground: '215 15% 65%',
      accent: '220 20% 55%',
      accentForeground: '215 30% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '215 20% 20%',
      input: '215 20% 18%',
      ring: '215 25% 55%',
    },
  },
  cherry: {
    id: 'cherry',
    name: 'Cherry Blossom',
    description: 'Japanese cherry blossom',
    preview: { primary: '340 80% 65%', accent: '350 75% 60%', secondary: '340 50% 94%' },
    light: {
      background: '340 30% 98%',
      foreground: '340 25% 15%',
      card: '340 35% 99%',
      cardForeground: '340 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '340 25% 15%',
      primary: '340 80% 65%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '340 85% 75%',
      secondary: '340 50% 94%',
      secondaryForeground: '340 60% 35%',
      muted: '340 20% 94%',
      mutedForeground: '340 15% 45%',
      accent: '350 75% 60%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '340 20% 88%',
      input: '340 20% 92%',
      ring: '340 80% 65%',
    },
    dark: {
      background: '340 35% 8%',
      foreground: '340 50% 95%',
      card: '340 30% 12%',
      cardForeground: '340 50% 95%',
      popover: '340 35% 10%',
      popoverForeground: '340 50% 95%',
      primary: '340 80% 70%',
      primaryForeground: '340 35% 8%',
      primaryGlow: '340 85% 80%',
      secondary: '340 45% 20%',
      secondaryForeground: '340 60% 80%',
      muted: '340 25% 18%',
      mutedForeground: '340 20% 65%',
      accent: '350 75% 65%',
      accentForeground: '340 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '340 25% 20%',
      input: '340 25% 18%',
      ring: '340 80% 70%',
    },
  },
  cobalt: {
    id: 'cobalt',
    name: 'Cobalt Blue',
    description: 'Deep rich cobalt',
    preview: { primary: '225 85% 55%', accent: '230 80% 50%', secondary: '225 50% 94%' },
    light: {
      background: '225 30% 98%',
      foreground: '225 25% 12%',
      card: '225 35% 99%',
      cardForeground: '225 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '225 25% 12%',
      primary: '225 85% 55%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '225 90% 65%',
      secondary: '225 50% 94%',
      secondaryForeground: '225 60% 35%',
      muted: '225 20% 94%',
      mutedForeground: '225 15% 45%',
      accent: '230 80% 50%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '225 20% 88%',
      input: '225 20% 92%',
      ring: '225 85% 55%',
    },
    dark: {
      background: '225 35% 8%',
      foreground: '225 50% 95%',
      card: '225 30% 12%',
      cardForeground: '225 50% 95%',
      popover: '225 35% 10%',
      popoverForeground: '225 50% 95%',
      primary: '225 85% 60%',
      primaryForeground: '225 35% 8%',
      primaryGlow: '225 90% 70%',
      secondary: '225 45% 20%',
      secondaryForeground: '225 60% 80%',
      muted: '225 25% 18%',
      mutedForeground: '225 20% 65%',
      accent: '230 80% 55%',
      accentForeground: '225 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '225 25% 20%',
      input: '225 25% 18%',
      ring: '225 85% 60%',
    },
  },
  coral: {
    id: 'coral',
    name: 'Coral Reef',
    description: 'Vibrant coral tones',
    preview: { primary: '16 85% 60%', accent: '10 80% 55%', secondary: '16 50% 94%' },
    light: {
      background: '16 30% 98%',
      foreground: '16 25% 15%',
      card: '16 35% 99%',
      cardForeground: '16 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '16 25% 15%',
      primary: '16 85% 60%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '16 90% 70%',
      secondary: '16 50% 94%',
      secondaryForeground: '16 60% 35%',
      muted: '16 20% 94%',
      mutedForeground: '16 15% 45%',
      accent: '10 80% 55%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '16 20% 88%',
      input: '16 20% 92%',
      ring: '16 85% 60%',
    },
    dark: {
      background: '16 35% 8%',
      foreground: '16 50% 95%',
      card: '16 30% 12%',
      cardForeground: '16 50% 95%',
      popover: '16 35% 10%',
      popoverForeground: '16 50% 95%',
      primary: '16 85% 65%',
      primaryForeground: '16 35% 8%',
      primaryGlow: '16 90% 75%',
      secondary: '16 45% 20%',
      secondaryForeground: '16 60% 80%',
      muted: '16 25% 18%',
      mutedForeground: '16 20% 65%',
      accent: '10 80% 60%',
      accentForeground: '16 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '16 25% 20%',
      input: '16 25% 18%',
      ring: '16 85% 65%',
    },
  },
  wine: {
    id: 'wine',
    name: 'Wine Berry',
    description: 'Rich wine and berry',
    preview: { primary: '310 60% 45%', accent: '320 55% 50%', secondary: '310 50% 94%' },
    light: {
      background: '310 30% 98%',
      foreground: '310 25% 12%',
      card: '310 35% 99%',
      cardForeground: '310 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '310 25% 12%',
      primary: '310 60% 45%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '310 70% 55%',
      secondary: '310 50% 94%',
      secondaryForeground: '310 60% 30%',
      muted: '310 20% 94%',
      mutedForeground: '310 15% 45%',
      accent: '320 55% 50%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '310 20% 88%',
      input: '310 20% 92%',
      ring: '310 60% 45%',
    },
    dark: {
      background: '310 35% 8%',
      foreground: '310 50% 95%',
      card: '310 30% 12%',
      cardForeground: '310 50% 95%',
      popover: '310 35% 10%',
      popoverForeground: '310 50% 95%',
      primary: '310 60% 55%',
      primaryForeground: '310 35% 8%',
      primaryGlow: '310 70% 65%',
      secondary: '310 45% 20%',
      secondaryForeground: '310 60% 80%',
      muted: '310 25% 18%',
      mutedForeground: '310 20% 65%',
      accent: '320 55% 55%',
      accentForeground: '310 35% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '310 25% 20%',
      input: '310 25% 18%',
      ring: '310 60% 55%',
    },
  },
  midnight: {
    id: 'midnight',
    name: 'Midnight Indigo',
    description: 'Deep midnight sky',
    preview: { primary: '245 70% 55%', accent: '255 65% 50%', secondary: '245 50% 94%' },
    light: {
      background: '245 25% 98%',
      foreground: '245 25% 12%',
      card: '245 30% 99%',
      cardForeground: '245 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '245 25% 12%',
      primary: '245 70% 55%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '245 80% 65%',
      secondary: '245 50% 94%',
      secondaryForeground: '245 60% 35%',
      muted: '245 20% 94%',
      mutedForeground: '245 15% 45%',
      accent: '255 65% 50%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '245 20% 88%',
      input: '245 20% 92%',
      ring: '245 70% 55%',
    },
    dark: {
      background: '245 35% 6%',
      foreground: '245 50% 95%',
      card: '245 30% 10%',
      cardForeground: '245 50% 95%',
      popover: '245 35% 8%',
      popoverForeground: '245 50% 95%',
      primary: '245 70% 60%',
      primaryForeground: '245 35% 6%',
      primaryGlow: '245 80% 70%',
      secondary: '245 45% 18%',
      secondaryForeground: '245 60% 80%',
      muted: '245 25% 16%',
      mutedForeground: '245 20% 65%',
      accent: '255 65% 55%',
      accentForeground: '245 35% 6%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '245 25% 18%',
      input: '245 25% 16%',
      ring: '245 70% 60%',
    },
  },
  peach: {
    id: 'peach',
    name: 'Peach Blush',
    description: 'Soft warm peach',
    preview: { primary: '20 85% 65%', accent: '12 80% 60%', secondary: '20 50% 94%' },
    light: {
      background: '20 35% 98%',
      foreground: '20 25% 15%',
      card: '20 40% 99%',
      cardForeground: '20 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '20 25% 15%',
      primary: '20 85% 65%',
      primaryForeground: '20 25% 10%',
      primaryGlow: '20 90% 75%',
      secondary: '20 50% 94%',
      secondaryForeground: '20 60% 35%',
      muted: '20 20% 94%',
      mutedForeground: '20 15% 45%',
      accent: '12 80% 60%',
      accentForeground: '20 25% 10%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '20 20% 88%',
      input: '20 20% 92%',
      ring: '20 85% 65%',
    },
    dark: {
      background: '20 30% 8%',
      foreground: '20 50% 95%',
      card: '20 25% 12%',
      cardForeground: '20 50% 95%',
      popover: '20 30% 10%',
      popoverForeground: '20 50% 95%',
      primary: '20 85% 70%',
      primaryForeground: '20 30% 8%',
      primaryGlow: '20 90% 80%',
      secondary: '20 45% 20%',
      secondaryForeground: '20 60% 80%',
      muted: '20 25% 18%',
      mutedForeground: '20 20% 65%',
      accent: '12 80% 65%',
      accentForeground: '20 30% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '20 25% 20%',
      input: '20 25% 18%',
      ring: '20 85% 70%',
    },
  },
  emerald: {
    id: 'emerald',
    name: 'Emerald Gem',
    description: 'Precious emerald green',
    preview: { primary: '155 80% 40%', accent: '145 75% 38%', secondary: '155 50% 94%' },
    light: {
      background: '155 30% 98%',
      foreground: '155 25% 10%',
      card: '155 35% 99%',
      cardForeground: '155 25% 10%',
      popover: '0 0% 100%',
      popoverForeground: '155 25% 10%',
      primary: '155 80% 40%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '155 85% 50%',
      secondary: '155 50% 94%',
      secondaryForeground: '155 60% 28%',
      muted: '155 20% 94%',
      mutedForeground: '155 15% 45%',
      accent: '145 75% 38%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '155 20% 88%',
      input: '155 20% 92%',
      ring: '155 80% 40%',
    },
    dark: {
      background: '155 35% 6%',
      foreground: '155 50% 95%',
      card: '155 30% 10%',
      cardForeground: '155 50% 95%',
      popover: '155 35% 8%',
      popoverForeground: '155 50% 95%',
      primary: '155 80% 48%',
      primaryForeground: '155 35% 6%',
      primaryGlow: '155 85% 58%',
      secondary: '155 45% 18%',
      secondaryForeground: '155 60% 80%',
      muted: '155 25% 16%',
      mutedForeground: '155 20% 65%',
      accent: '145 75% 45%',
      accentForeground: '155 35% 6%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '155 25% 18%',
      input: '155 25% 16%',
      ring: '155 80% 48%',
    },
  },
  sapphire: {
    id: 'sapphire',
    name: 'Royal Sapphire',
    description: 'Royal blue sapphire',
    preview: { primary: '220 85% 50%', accent: '228 80% 55%', secondary: '220 50% 94%' },
    light: {
      background: '220 30% 98%',
      foreground: '220 25% 12%',
      card: '220 35% 99%',
      cardForeground: '220 25% 12%',
      popover: '0 0% 100%',
      popoverForeground: '220 25% 12%',
      primary: '220 85% 50%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '220 90% 60%',
      secondary: '220 50% 94%',
      secondaryForeground: '220 60% 35%',
      muted: '220 20% 94%',
      mutedForeground: '220 15% 45%',
      accent: '228 80% 55%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '220 20% 88%',
      input: '220 20% 92%',
      ring: '220 85% 50%',
    },
    dark: {
      background: '220 35% 7%',
      foreground: '220 50% 95%',
      card: '220 30% 11%',
      cardForeground: '220 50% 95%',
      popover: '220 35% 9%',
      popoverForeground: '220 50% 95%',
      primary: '220 85% 58%',
      primaryForeground: '220 35% 7%',
      primaryGlow: '220 90% 68%',
      secondary: '220 45% 19%',
      secondaryForeground: '220 60% 80%',
      muted: '220 25% 17%',
      mutedForeground: '220 20% 65%',
      accent: '228 80% 60%',
      accentForeground: '220 35% 7%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '220 25% 19%',
      input: '220 25% 17%',
      ring: '220 85% 58%',
    },
  },
  rose: {
    id: 'rose',
    name: 'Rose Gold',
    description: 'Elegant rose gold',
    preview: { primary: '345 75% 60%', accent: '355 70% 55%', secondary: '345 50% 94%' },
    light: {
      background: '345 30% 98%',
      foreground: '345 25% 15%',
      card: '345 35% 99%',
      cardForeground: '345 25% 15%',
      popover: '0 0% 100%',
      popoverForeground: '345 25% 15%',
      primary: '345 75% 60%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '345 80% 70%',
      secondary: '345 50% 94%',
      secondaryForeground: '345 60% 35%',
      muted: '345 20% 94%',
      mutedForeground: '345 15% 45%',
      accent: '355 70% 55%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '345 20% 88%',
      input: '345 20% 92%',
      ring: '345 75% 60%',
    },
    dark: {
      background: '345 30% 8%',
      foreground: '345 50% 95%',
      card: '345 25% 12%',
      cardForeground: '345 50% 95%',
      popover: '345 30% 10%',
      popoverForeground: '345 50% 95%',
      primary: '345 75% 65%',
      primaryForeground: '345 30% 8%',
      primaryGlow: '345 80% 75%',
      secondary: '345 45% 20%',
      secondaryForeground: '345 60% 80%',
      muted: '345 25% 18%',
      mutedForeground: '345 20% 65%',
      accent: '355 70% 60%',
      accentForeground: '345 30% 8%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '345 25% 20%',
      input: '345 25% 18%',
      ring: '345 75% 65%',
    },
  },
  noir: {
    id: 'noir',
    name: 'Noir Black',
    description: 'Elegant monochrome noir',
    preview: { primary: '0 0% 15%', accent: '0 0% 25%', secondary: '0 0% 94%' },
    light: {
      background: '0 0% 98%',
      foreground: '0 0% 10%',
      card: '0 0% 100%',
      cardForeground: '0 0% 10%',
      popover: '0 0% 100%',
      popoverForeground: '0 0% 10%',
      primary: '0 0% 15%',
      primaryForeground: '0 0% 100%',
      primaryGlow: '0 0% 25%',
      secondary: '0 0% 94%',
      secondaryForeground: '0 0% 25%',
      muted: '0 0% 94%',
      mutedForeground: '0 0% 45%',
      accent: '0 0% 25%',
      accentForeground: '0 0% 100%',
      destructive: '0 72% 51%',
      destructiveForeground: '0 0% 100%',
      border: '0 0% 88%',
      input: '0 0% 92%',
      ring: '0 0% 15%',
    },
    dark: {
      background: '0 0% 5%',
      foreground: '0 0% 95%',
      card: '0 0% 8%',
      cardForeground: '0 0% 95%',
      popover: '0 0% 6%',
      popoverForeground: '0 0% 95%',
      primary: '0 0% 95%',
      primaryForeground: '0 0% 5%',
      primaryGlow: '0 0% 100%',
      secondary: '0 0% 15%',
      secondaryForeground: '0 0% 80%',
      muted: '0 0% 12%',
      mutedForeground: '0 0% 65%',
      accent: '0 0% 85%',
      accentForeground: '0 0% 5%',
      destructive: '0 65% 50%',
      destructiveForeground: '0 0% 100%',
      border: '0 0% 18%',
      input: '0 0% 12%',
      ring: '0 0% 95%',
    },
  },
} as const;

export type ThemeId = keyof typeof THEMES;
export type ThemeMode = 'light' | 'dark' | 'system';

interface ThemeContextType {
  themeId: ThemeId;
  mode: ThemeMode;
  resolvedMode: 'light' | 'dark';
  setTheme: (themeId: ThemeId) => void;
  setMode: (mode: ThemeMode) => void;
  themes: typeof THEMES;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

const STORAGE_KEY_THEME = 'app-theme';
const STORAGE_KEY_MODE = 'app-theme-mode';

export function ThemeProvider({ children }: { children: ReactNode }) {
  const [themeId, setThemeId] = useState<ThemeId>(() => {
    if (typeof window !== 'undefined') {
      return (localStorage.getItem(STORAGE_KEY_THEME) as ThemeId) || 'aurora';
    }
    return 'aurora';
  });

  const [mode, setModeState] = useState<ThemeMode>(() => {
    if (typeof window !== 'undefined') {
      return (localStorage.getItem(STORAGE_KEY_MODE) as ThemeMode) || 'system';
    }
    return 'system';
  });

  const [resolvedMode, setResolvedMode] = useState<'light' | 'dark'>('light');

  // Resolve system preference
  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    
    const updateResolvedMode = () => {
      if (mode === 'system') {
        setResolvedMode(mediaQuery.matches ? 'dark' : 'light');
      } else {
        setResolvedMode(mode);
      }
    };

    updateResolvedMode();
    mediaQuery.addEventListener('change', updateResolvedMode);
    return () => mediaQuery.removeEventListener('change', updateResolvedMode);
  }, [mode]);

  // Apply theme colors to CSS variables
  useEffect(() => {
    const theme = THEMES[themeId];
    const colors = theme[resolvedMode];
    const root = document.documentElement;

    // Apply dark class for dark mode
    root.classList.toggle('dark', resolvedMode === 'dark');

    // Apply all color variables
    Object.entries(colors).forEach(([key, value]) => {
      const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();
      root.style.setProperty(`--${cssKey}`, value);
    });

    // Update gradients based on theme
    const primaryHsl = colors.primary;
    const accentHsl = colors.accent;
    const secondaryHsl = colors.secondary;
    
    root.style.setProperty('--gradient-primary', `linear-gradient(135deg, hsl(${primaryHsl}), hsl(${accentHsl}))`);
    root.style.setProperty('--gradient-hero', `linear-gradient(180deg, hsl(${colors.background}) 0%, hsl(${colors.card}) 100%)`);
    root.style.setProperty('--gradient-aurora', `linear-gradient(135deg, hsl(${primaryHsl}), hsl(${secondaryHsl}), hsl(${accentHsl}))`);
    root.style.setProperty('--shadow-glow', `0 0 40px hsl(${primaryHsl} / 0.25)`);

    // Update sidebar colors
    root.style.setProperty('--sidebar-background', resolvedMode === 'dark' ? colors.card : '230 35% 15%');
    root.style.setProperty('--sidebar-foreground', resolvedMode === 'dark' ? colors.foreground : '200 50% 95%');
    root.style.setProperty('--sidebar-primary', colors.primary);
    root.style.setProperty('--sidebar-primary-foreground', colors.primaryForeground);
    root.style.setProperty('--sidebar-accent', resolvedMode === 'dark' ? colors.secondary : '270 40% 25%');
    root.style.setProperty('--sidebar-accent-foreground', resolvedMode === 'dark' ? colors.foreground : '200 50% 95%');
    root.style.setProperty('--sidebar-border', resolvedMode === 'dark' ? colors.border : '230 30% 25%');
    root.style.setProperty('--sidebar-ring', colors.primary);

    // Apply semantic status colors - FULLY THEMED
    // Success uses accent (typically green-ish) - adapts per theme
    root.style.setProperty('--success', accentHsl);
    root.style.setProperty('--success-foreground', colors.accentForeground);
    
    // Warning - derives from theme but maintains warm hue for visibility
    const warningLight = resolvedMode === 'dark' ? '38 92% 55%' : '38 92% 50%';
    root.style.setProperty('--warning', warningLight);
    root.style.setProperty('--warning-foreground', resolvedMode === 'dark' ? colors.background : '0 0% 100%');
    
    // Info uses primary color for consistency with theme
    root.style.setProperty('--info', primaryHsl);
    root.style.setProperty('--info-foreground', colors.primaryForeground);
    
    // Status indicators - fully themed
    root.style.setProperty('--online', accentHsl);
    root.style.setProperty('--online-foreground', colors.accentForeground);
    root.style.setProperty('--offline', colors.mutedForeground);
    root.style.setProperty('--offline-foreground', '0 0% 100%');
    root.style.setProperty('--busy', warningLight);
    root.style.setProperty('--busy-foreground', resolvedMode === 'dark' ? colors.background : '0 0% 100%');
    root.style.setProperty('--away', warningLight);
    root.style.setProperty('--away-foreground', resolvedMode === 'dark' ? colors.background : '0 0% 100%');
    
    // Gender colors - derive from theme for consistency
    // Male uses a blue-tinted variant of primary or info
    // Female uses a pink/rose-tinted variant
    const maleColor = resolvedMode === 'dark' ? '210 90% 55%' : '210 90% 50%';
    const femaleColor = resolvedMode === 'dark' ? '330 81% 65%' : '330 81% 60%';
    root.style.setProperty('--male', maleColor);
    root.style.setProperty('--female', femaleColor);
    
    // Destructive (error) - slight adjustment for dark mode visibility
    if (resolvedMode === 'dark') {
      root.style.setProperty('--destructive', '0 65% 50%');
      root.style.setProperty('--destructive-foreground', '0 0% 100%');
    } else {
      root.style.setProperty('--destructive', '0 72% 51%');
      root.style.setProperty('--destructive-foreground', '0 0% 100%');
    }

  }, [themeId, resolvedMode]);

  // Persist to localStorage
  useEffect(() => {
    localStorage.setItem(STORAGE_KEY_THEME, themeId);
  }, [themeId]);

  useEffect(() => {
    localStorage.setItem(STORAGE_KEY_MODE, mode);
  }, [mode]);

  const setTheme = (newThemeId: ThemeId) => {
    setThemeId(newThemeId);
  };

  const setMode = (newMode: ThemeMode) => {
    setModeState(newMode);
  };

  return (
    <ThemeContext.Provider value={{ themeId, mode, resolvedMode, setTheme, setMode, themes: THEMES }}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useAppTheme() {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error('useAppTheme must be used within a ThemeProvider');
  }
  return context;
}
